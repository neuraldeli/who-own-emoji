<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>who owns the emoji â€” demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- react 18 umd globals -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- chart.js for the history plot -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta name="color-scheme" content="light only">
    <style>html,body,#root{height:100%}</style>
  </head>
  <body class="bg-amber-50">
    <div id="root"></div>

    <script>
      const { useMemo, useState, useEffect, useRef } = React

      // ~60 emojis
      const EMOJIS = [
        { id:'grin', ch:'ğŸ˜€', label:'grinning', hue:'from-yellow-100 to-amber-100' },
        { id:'smile', ch:'ğŸ˜„', label:'smile', hue:'from-yellow-100 to-amber-100' },
        { id:'joy', ch:'ğŸ˜‚', label:'joy', hue:'from-yellow-100 to-orange-100' },
        { id:'lol', ch:'ğŸ¤£', label:'rofl', hue:'from-yellow-100 to-orange-100' },
        { id:'heart', ch:'â¤ï¸', label:'heart', hue:'from-rose-100 to-pink-100' },
        { id:'hearts', ch:'ğŸ˜', label:'hearts', hue:'from-rose-100 to-fuchsia-100' },
        { id:'kiss', ch:'ğŸ˜˜', label:'kiss', hue:'from-rose-100 to-fuchsia-100' },
        { id:'sob', ch:'ğŸ˜­', label:'sob', hue:'from-sky-100 to-blue-100' },
        { id:'sweat', ch:'ğŸ¥µ', label:'hot', hue:'from-orange-100 to-red-100' },
        { id:'cold', ch:'ğŸ¥¶', label:'cold', hue:'from-cyan-100 to-sky-100' },
        { id:'mindblown', ch:'ğŸ¤¯', label:'mind blown', hue:'from-purple-100 to-fuchsia-100' },
        { id:'sunglasses', ch:'ğŸ˜', label:'cool', hue:'from-yellow-100 to-emerald-100' },
        { id:'party', ch:'ğŸ¥³', label:'party', hue:'from-purple-100 to-indigo-100' },
        { id:'skull', ch:'ğŸ’€', label:'skull', hue:'from-stone-100 to-gray-100' },
        { id:'ghost', ch:'ğŸ‘»', label:'ghost', hue:'from-stone-100 to-gray-100' },
        { id:'alien', ch:'ğŸ‘½', label:'alien', hue:'from-cyan-100 to-green-100' },
        { id:'poo', ch:'ğŸ’©', label:'poo', hue:'from-amber-100 to-orange-100' },
        { id:'pray', ch:'ğŸ™', label:'pray', hue:'from-slate-100 to-zinc-100' },
        { id:'clap', ch:'ğŸ‘', label:'clap', hue:'from-yellow-100 to-amber-100' },
        { id:'fire', ch:'ğŸ”¥', label:'fire', hue:'from-orange-100 to-red-100' },
        { id:'star', ch:'â­ï¸', label:'star', hue:'from-yellow-100 to-amber-100' },
        { id:'sparkles', ch:'âœ¨', label:'sparkles', hue:'from-yellow-100 to-amber-100' },
        { id:'zap', ch:'âš¡ï¸', label:'zap', hue:'from-yellow-100 to-orange-100' },
        { id:'boom', ch:'ğŸ’¥', label:'boom', hue:'from-orange-100 to-red-100' },
        { id:'rocket', ch:'ğŸš€', label:'rocket', hue:'from-cyan-100 to-sky-100' },
        { id:'frog', ch:'ğŸ¸', label:'frog', hue:'from-lime-100 to-green-100' },
        { id:'cat', ch:'ğŸ±', label:'cat', hue:'from-amber-100 to-yellow-100' },
        { id:'dog', ch:'ğŸ¶', label:'dog', hue:'from-amber-100 to-yellow-100' },
        { id:'fox', ch:'ğŸ¦Š', label:'fox', hue:'from-amber-100 to-orange-100' },
        { id:'panda', ch:'ğŸ¼', label:'panda', hue:'from-stone-100 to-gray-100' },
        { id:'bear', ch:'ğŸ»', label:'bear', hue:'from-amber-100 to-orange-100' },
        { id:'lion', ch:'ğŸ¦', label:'lion', hue:'from-amber-100 to-orange-100' },
        { id:'unicorn', ch:'ğŸ¦„', label:'unicorn', hue:'from-pink-100 to-fuchsia-100' },
        { id:'monkey', ch:'ğŸ™ˆ', label:'no see', hue:'from-stone-100 to-zinc-100' },
        { id:'bananas', ch:'ğŸŒ', label:'banana', hue:'from-yellow-100 to-amber-100' },
        { id:'peach', ch:'ğŸ‘', label:'peach', hue:'from-rose-100 to-orange-100' },
        { id:'eggplant', ch:'ğŸ†', label:'eggplant', hue:'from-purple-100 to-indigo-100' },
        { id:'pizza', ch:'ğŸ•', label:'pizza', hue:'from-amber-100 to-orange-100' },
        { id:'taco', ch:'ğŸŒ®', label:'taco', hue:'from-amber-100 to-yellow-100' },
        { id:'sushi', ch:'ğŸ£', label:'sushi', hue:'from-rose-100 to-orange-100' },
        { id:'coffee', ch:'â˜•ï¸', label:'coffee', hue:'from-stone-100 to-zinc-100' },
        { id:'beer', ch:'ğŸº', label:'beer', hue:'from-amber-100 to-yellow-100' },
        { id:'wine', ch:'ğŸ·', label:'wine', hue:'from-rose-100 to-red-100' },
        { id:'boba', ch:'ğŸ§‹', label:'boba', hue:'from-amber-100 to-orange-100' },
        { id:'gift', ch:'ğŸ', label:'gift', hue:'from-rose-100 to-pink-100' },
        { id:'balloon', ch:'ğŸˆ', label:'balloon', hue:'from-rose-100 to-red-100' },
        { id:'trophy', ch:'ğŸ†', label:'trophy', hue:'from-yellow-100 to-amber-100' },
        { id:'medal', ch:'ğŸ¥‡', label:'gold', hue:'from-yellow-100 to-amber-100' },
        { id:'gem', ch:'ğŸ’', label:'gem', hue:'from-cyan-100 to-sky-100' },
        { id:'ring', ch:'ğŸ’', label:'ring', hue:'from-amber-100 to-yellow-100' },
        { id:'money', ch:'ğŸ’¸', label:'money', hue:'from-emerald-100 to-green-100' },
        { id:'chart', ch:'ğŸ“ˆ', label:'chart up', hue:'from-emerald-100 to-green-100' },
        { id:'computer', ch:'ğŸ’»', label:'laptop', hue:'from-slate-100 to-zinc-100' },
        { id:'floppy', ch:'ğŸ’¾', label:'save', hue:'from-slate-100 to-zinc-100' },
        { id:'link', ch:'ğŸ”—', label:'link', hue:'from-slate-100 to-zinc-100' },
        { id:'lock', ch:'ğŸ”’', label:'lock', hue:'from-slate-100 to-zinc-100' },
        { id:'key', ch:'ğŸ”‘', label:'key', hue:'from-amber-100 to-yellow-100' },
        { id:'globe', ch:'ğŸŒ', label:'earth', hue:'from-emerald-100 to-green-100' },
        { id:'moon', ch:'ğŸŒ™', label:'moon', hue:'from-indigo-100 to-blue-100' },
        { id:'sun', ch:'â˜€ï¸', label:'sun', hue:'from-yellow-100 to-amber-100' },
      ]

      const BASE_PRICE = 0.1

      function short(addr) {
        return addr ? addr.slice(0, 4) + 'â€¦' + addr.slice(-4) : ''
      }

      function randomOwner() {
        const alphabet = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'
        let s = ''
        for (let i = 0; i < 44; i++) s += alphabet[Math.floor(Math.random() * alphabet.length)]
        return s
      }

      function bump(p) { return Number((p * 1.2).toFixed(3)) }

      function synthHistory(steals, startTime = Date.now()) {
        // start at base price; add a point per steal with slightly older timestamps
        const hist = []
        let p = BASE_PRICE
        const now = startTime
        for (let i = 0; i < steals; i++) {
          const t = now - (steals - i) * (3 + Math.floor(Math.random()*7)) * 60 * 1000 // spaced minutes apart
          hist.push({ t, price: Number(p.toFixed(3)) })
          p *= 1.2
        }
        return hist
      }

      function Header() {
        return React.createElement('div', { className: 'sticky top-0 z-10 -mx-4 mb-4 bg-gradient-to-b from-amber-50/80 to-white/60 backdrop-blur' },
          React.createElement('div', { className: 'mx-auto max-w-5xl px-4 py-4 flex items-center justify-between' },
            React.createElement('div', { className: 'flex items-center gap-3' },
              React.createElement('div', { className: 'h-9 w-9 rounded-2xl bg-gradient-to-br from-yellow-300 to-amber-400 shadow-inner grid place-items-center' },
                React.createElement('span', { className: 'text-2xl' }, 'ğŸ˜Š')
              ),
              React.createElement('div', { className: 'leading-tight' },
                React.createElement('div', { className: 'font-extrabold tracking-tight text-xl text-zinc-900' }, 'who owns the emoji'),
                React.createElement('div', { className: 'text-xs text-zinc-500' }, 'claim Â· steal Â· flex')
              )
            ),
            React.createElement('div', { className: 'flex items-center gap-2' },
              React.createElement('span', { className: 'hidden sm:inline text-xs px-2 py-1 rounded-full bg-zinc-100 text-zinc-600 border border-zinc-200' }, 'demo mode'),
              React.createElement('button', { className: 'rounded-xl px-3 py-2 text-sm font-semibold bg-zinc-900 text-white shadow hover:opacity-90' }, 'connect wallet')
            )
          )
        )
      }

      function Hero() {
        return React.createElement('div', { className: 'mt-6 rounded-3xl bg-gradient-to-br from-amber-100 to-orange-50 p-5 md:p-7 shadow-sm border border-amber-200/40' },
          React.createElement('div', { className: 'flex flex-col gap-3 md:flex-row md:items-center md:justify-between' },
            React.createElement('div', { className: 'max-w-xl' },
              React.createElement('h1', { className: 'text-2xl md:text-3xl font-extrabold tracking-tight text-zinc-900' }, 'own an emoji on-chain*'),
              React.createElement('p', { className: 'text-sm md:text-base text-zinc-600 mt-2' }, 'buy any emoji. the next person who steals it pays +20% and you get a cut. totally not a game, promise.'),
              React.createElement('p', { className: 'text-[10px] text-zinc-400 mt-1' }, '*legally you own vibes, not unicode. relax.')
            ),
            React.createElement('div', { className: 'grid grid-cols-6 gap-2 text-2xl md:text-3xl' },
              'ğŸ˜€â¤ï¸ğŸ˜­ğŸ˜ğŸ¸ğŸ’©ğŸ™ğŸ˜ğŸ¥³ğŸ’€ğŸ”¥ğŸš€'.split('').map((e, i) =>
                React.createElement('span', { key: i, className: 'grid place-items-center h-10 w-10 md:h-12 md:w-12 rounded-2xl bg-white shadow-inner border border-white/60' }, e)
              )
            )
          )
        )
      }

      function SortTab({ label, active, onClick }) {
        return React.createElement('button', {
            onClick,
            className: 'rounded-xl border px-3 py-2 text-sm transition shadow-sm ' + (active ? 'bg-zinc-900 border-zinc-900 text-white' : 'bg-white border-zinc-200 text-zinc-700 hover:bg-zinc-50')
        }, label)
      }

      function Toolbar({ q, setQ, sortKey, setSortKey }) {
        return React.createElement('div', { className: 'mt-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between' },
          React.createElement('div', { className: 'flex-1 relative' },
            React.createElement('input', { value: q, onChange: (e) => setQ(e.target.value), placeholder: 'search emoji or name',
              className: 'w-full rounded-2xl border border-zinc-200 bg-white px-4 py-3 pl-11 text-sm shadow-sm focus:outline-none focus:ring-2 focus:ring-amber-300' }),
            React.createElement('span', { className: 'absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400' }, 'ğŸ”')
          ),
          React.createElement('div', { className: 'flex items-center gap-2' },
            React.createElement(SortTab, { label: 'trending', active: sortKey === 'trending', onClick: () => setSortKey('trending') }),
            React.createElement(SortTab, { label: 'price', active: sortKey === 'price', onClick: () => setSortKey('price') }),
            React.createElement(SortTab, { label: 'steals', active: sortKey === 'steals', onClick: () => setSortKey('steals') }),
            React.createElement(SortTab, { label: 'new', active: sortKey === 'new', onClick: () => setSortKey('new') }),
          )
        )
      }

      function Stat({ label, value }) {
        return React.createElement('div', { className: 'rounded-2xl bg-white border border-zinc-200 p-3 text-center' },
          React.createElement('div', { className: 'text-[11px] uppercase tracking-wide text-zinc-500' }, label),
          React.createElement('div', { className: 'text-lg font-bold text-zinc-900' }, value)
        )
      }

      function EmojiCard({ it, onOpen, onSteal }) {
        return React.createElement('div', {
            className: 'group rounded-3xl bg-gradient-to-br from-white to-zinc-50 p-3 border border-zinc-200 shadow-sm hover:shadow transition cursor-pointer',
            onClick: onOpen
          },
          React.createElement('div', { className: `rounded-2xl bg-gradient-to-br ${it.hue} p-4 shadow-inner grid place-items-center text-5xl h-28` },
            React.createElement('span', { className: 'drop-shadow-sm' }, it.ch)
          ),
          React.createElement('div', { className: 'mt-3 flex items-center justify-between' },
            React.createElement('div', null,
              React.createElement('div', { className: 'font-semibold text-zinc-900' }, it.label),
              React.createElement('div', { className: 'text-xs text-zinc-500' },
                it.owner ? React.createElement('span', null, 'owned by ', React.createElement('b', { className: 'font-semibold' }, short(it.owner))) : React.createElement('span', { className: 'italic text-amber-600' }, 'unclaimed')
              )
            ),
            React.createElement('div', { className: 'text-right' },
              React.createElement('div', { className: 'text-sm font-semibold text-zinc-900' }, `${it.price} SOL`),
              React.createElement('div', { className: 'text-[10px] text-zinc-500' }, `${it.steals} steals`)
            )
          ),
          React.createElement('div', { className: 'mt-3 flex gap-2' },
            React.createElement('button', {
              onClick: (e) => { e.stopPropagation(); onSteal(); },
              className: 'flex-1 rounded-xl bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white text-sm font-semibold px-3 py-2 shadow hover:opacity-90'
            }, it.owner ? 'steal' : 'claim'),
            React.createElement('button', {
              onClick: (e) => { e.stopPropagation(); onOpen(); },
              className: 'rounded-xl bg-white border border-zinc-200 text-sm px-3 py-2'
            }, 'details')
          )
        )
      }

      function Details({ it, onClose, onSteal }) {
        const canvasRef = useRef(null)
        const chartRef = useRef(null)

        useEffect(() => {
          function esc(e) { if (e.key === 'Escape') onClose() }
          window.addEventListener('keydown', esc)
          return () => window.removeEventListener('keydown', esc)
        }, [onClose])

        useEffect(() => {
          // render chart when opened
          const el = canvasRef.current
          if (!el || !window.Chart) return
          if (chartRef.current) { chartRef.current.destroy(); chartRef.current = null }
          if (!it.history || it.history.length === 0) return

          const labels = it.history.map(h => new Date(h.t).toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}))
          const data = it.history.map(h => h.price)

          const ctx = el.getContext('2d')
          chartRef.current = new Chart(ctx, {
            type: 'line',
            data: {
              labels,
              datasets: [{
                data,
                tension: 0.25,
                pointRadius: 3,
                borderWidth: 2,
                fill: false,
              }]
            },
            options: {
              animation: false,
              responsive: true,
              plugins: {
                legend: { display: false },
                tooltip: {
                  callbacks: { label: (c) => `${c.parsed.y.toFixed(3)} SOL` }
                }
              },
              scales: {
                x: { ticks: { maxTicksLimit: 6 } },
                y: { beginAtZero: false }
              }
            }
          })

          return () => { if (chartRef.current) chartRef.current.destroy(); chartRef.current = null }
        }, [it])

        return React.createElement('div', { className: 'fixed inset-0 z-20 grid place-items-center bg-black/30 p-4', onClick: onClose },
          React.createElement('div', { className: 'w-full max-w-lg rounded-3xl bg-white p-5 md:p-6 shadow-2xl border border-zinc-200', onClick: (e) => e.stopPropagation() },
            React.createElement('div', { className: 'flex items-start justify-between gap-4' },
              React.createElement('div', { className: 'flex items-center gap-3' },
                React.createElement('div', { className: `h-16 w-16 rounded-2xl grid place-items-center text-5xl bg-gradient-to-br ${it.hue} shadow-inner` }, it.ch),
                React.createElement('div', null,
                  React.createElement('div', { className: 'text-lg font-extrabold text-zinc-900' }, it.label),
                  React.createElement('div', { className: 'text-xs text-zinc-500' }, it.owner ? `owned by ${short(it.owner)}` : 'unclaimed')
                )
              ),
              React.createElement('button', { onClick: onClose, className: 'rounded-xl px-3 py-2 text-sm bg-zinc-100 hover:bg-zinc-200' }, 'esc')
            ),
            React.createElement('div', { className: 'mt-4 grid grid-cols-3 gap-3' },
              React.createElement(Stat, { label: 'price', value: `${it.price} SOL` }),
              React.createElement(Stat, { label: 'steals', value: it.steals }),
              React.createElement(Stat, { label: 'steal math', value: '+20% â†’ 75% owner / 25% treasury' }),
            ),
            React.createElement('div', { className: 'mt-4 rounded-2xl bg-zinc-50 border border-zinc-200 p-4 text-sm text-zinc-700' },
              'stealing costs +20% over the last price. of that +20% extra, 75% goes to the previous owner and 25% goes to the treasury. sellers always profit on a steal.'
            ),
            // chart section (only if thereâ€™s history)
            React.createElement('div', { className: 'mt-4' },
              React.createElement('div', { className: 'text-xs font-semibold text-zinc-600 mb-2' }, 'price history'),
              it.history && it.history.length
                ? React.createElement('canvas', { ref: canvasRef, width: 600, height: 240, className: 'w-full rounded-xl border border-zinc-200 p-2 bg-white' })
                : React.createElement('div', { className: 'text-xs text-zinc-500 italic' }, 'no steals yet.')
            ),
            React.createElement('div', { className: 'mt-5 flex items-center gap-3' },
              React.createElement('button', { onClick: onSteal, className: 'flex-1 rounded-xl bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white text-sm font-semibold px-4 py-3 shadow hover:opacity-90' }, it.owner ? 'steal now' : 'claim now'),
              React.createElement('button', { onClick: onClose, className: 'rounded-xl px-4 py-3 text-sm border border-zinc-200' }, 'close')
            )
          )
        )
      }

      function App() {
        const [q, setQ] = useState('')
        const [sortKey, setSortKey] = useState('trending')
        const [items, setItems] = useState(() =>
          EMOJIS.map((e) => {
            const isOwned = Math.random() < 0.45
            const steals = isOwned ? Math.floor(Math.random() * 8) : 0
            const history = synthHistory(steals)
            const price = steals > 0 ? Number((BASE_PRICE * Math.pow(1.2, steals)).toFixed(3)) : BASE_PRICE
            return {
              ...e,
              owner: isOwned ? randomOwner() : null,
              price,
              steals,
              trending: Math.random() < 0.4,
              history, // array of {t, price} (one per steal)
            }
          })
        )
        const [active, setActive] = useState(null)

        const filtered = useMemo(() => {
          const out = items.filter(i => i.label.includes(q.toLowerCase()) || i.ch.includes(q))
          const cmp =
            sortKey === 'price'  ? ((a,b) => a.price - b.price) :
            sortKey === 'new'    ? ((a,b) => (a.owner ? 1 : 0) - (b.owner ? 1 : 0)) :
            sortKey === 'steals' ? ((a,b) => b.steals - a.steals) :
                                   ((a,b) => Number(b.trending) - Number(a.trending))
          return out.slice().sort(cmp)
        }, [items, q, sortKey])

        function onSteal(id) {
          setItems((xs) =>
            xs.map((x) => {
              if (x.id !== id) return x
              const newPrice = bump(x.price)
              const newHist = x.history.concat([{ t: Date.now(), price: newPrice }])
              return {
                ...x,
                owner: randomOwner(),
                price: newPrice,
                steals: x.steals + 1,
                trending: true,
                history: newHist,
              }
            })
          )
        }

        return React.createElement('div', { className: 'min-h-screen bg-gradient-to-b from-amber-50 to-white text-zinc-800' },
          React.createElement('div', { className: 'mx-auto max-w-5xl px-4 pb-16' },
            React.createElement(Header, null),
            React.createElement(Hero, null),
            React.createElement(Toolbar, { q, setQ, sortKey, setSortKey }),
            React.createElement('div', { className: 'mt-6 grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4' },
              filtered.map((it) =>
                React.createElement(EmojiCard, { key: it.id, it, onOpen: () => setActive(it), onSteal: () => onSteal(it.id) })
              )
            ),
            React.createElement('div', { className: 'mt-10 text-center text-xs text-zinc-400' }, 'made with â¤ï¸ Â· demo ui Â· v0.3')
          ),
          active && React.createElement(Details, { it: active, onClose: () => setActive(null), onSteal: () => onSteal(active.id) })
        )
      }

      const root = ReactDOM.createRoot(document.getElementById('root'))
      root.render(React.createElement(App))
    </script>
  </body>
</html>
